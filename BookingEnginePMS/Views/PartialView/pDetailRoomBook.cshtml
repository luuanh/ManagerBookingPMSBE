@using BookingEnginePMS.Models;
@{
    List<TransitionLanguage> transitions = (List<TransitionLanguage>)Session["transitions"];
    Transition transition = new Transition(transitions);
    string currency = (string)Session["currency"];
}
@model Transition
<div>
    <div class="bp_sidebar">
        <div class="bp_sidebar_content">
            <h3>
                @Model.Translate(2373, "Your Booking Details")
            </h3>
        </div>
        <div class="bp_sidebar_content_block" attCal="{{calAllPriceForBooking()}}">
            <ul>
                <li>
                    <div class="float-l"><label><strong>@Model.Translate(2355, "Check in"):</strong></label></div>
                    <div class="float-r" ng-cloak>
                        {{params.fromDate | date:'dd/MM/yyyy' }}
                    </div>
                </li>
                <li>
                    <div class="float-l"><label><strong>@Model.Translate(2356, "Check out"):</strong></label></div>
                    <div class="float-r" ng-cloak>
                        {{params.toDate | date:'dd/MM/yyyy' }}
                    </div>
                </li>
                <li>
                    <div class="float-l"><label><strong>@Model.Translate(2357, "Adults"):</strong></label></div>
                    <div class="float-r" ng-cloak>{{params.adults}}</div>
                </li>
                <li>
                    <div class="float-l"><label><strong>@Model.Translate(2358, "Children"):</strong></label></div>
                    <div class="float-r" ng-cloak>{{params.child}}</div>
                </li>
                <li style="overflow: hidden;">
                    <div class="float-l"><label><strong>@Model.Translate(2359, "Room type"):</strong></label></div>
                    <div class="float-r" ng-cloak style="text-align:right">
                        <p ng-repeat="item in roomTypeChoose">
                            {{item.TotalRoomChoose}} x {{item.RoomTypeName}}
                        </p>
                    </div>
                </li>
                <li style="border-top: 1px dotted;">
                    <div class="float-l"><label><strong>@Model.Translate(2360, "Room charges"):</strong></label></div>
                    <div class="float-r" ng-cloak>
                        <span>
                            @if (currency == "VND")
                            {
                                <span> {{priceRoom | currency:'':'0'}} </span>
                            }
                            else
                            {
                                <span> {{priceRoomExchangeRate | currency:'':'2'}}</span>
                            }
                        </span><span class="unit-price">{{::currency}}</span>
                    </div>
                </li>
                <li>
                    <div class="float-l"><label><strong>@Model.Translate(2361, "Added services"):</strong></label></div>
                    <div class="float-r" ng-cloak>
                        @if (currency == "VND")
                        {
                            <span>{{priceService | currency:'':'0'}}</span>
                        }
                        else
                        {
                            <span>{{priceServiceExchangeRate | currency:'':'2'}}</span>
                        }
                        <span class="unit-price">{{::currency}}</span>
                    </div>
                </li>
                <li>
                    <div class="float-l"><label><strong>@Model.Translate(2362, "Added extrabed"):</strong></label></div>
                    <div class="float-r" ng-cloak>
                        @if (currency == "VND")
                        {
                            <span>{{priceExtrabed | currency:'':'0'}}</span>
                        }
                        else
                        {
                            <span>{{priceExtrabedExchangeRate | currency:'':'2'}}</span>
                        }
                        <span class="unit-price">{{::currency}}</span>
                    </div>
                </li>
                <li>
                    <div class="float-l"><label><strong>@Model.Translate(2363, "Voucher"):</strong></label></div>
                    <div class="float-r" ng-cloak>
                        <span>
                            -
                            @if (currency == "VND")
                            {
                                <span>{{voucher.amountForVoucher | currency:'':'0'}}</span>
                            }
                            else
                            {
                                <span>{{voucher.amountForVoucher | currency:'':'2'}}</span>
                            }
                        </span> <span class="unit-price">{{::currency}}</span>
                    </div>
                </li>
                <li ng-if="voucher.accept == 1" ng-cloak>
                    <div>
                        <p>
                            <b style="color: #ff0707;">{{voucher.voucherCode}}</b>
                            <a href="#" style="font-size: 10px;" ng-click="removeVoucher()">@Model.Translate(2364, "Remove")</a>
                        </p>
                    </div>
                </li>
                <li ng-if="voucher.accept != 1" style="margin-bottom: 14px;overflow: hidden;">
                    <div class="float-l">
                        <input ng-click="refreshErrorVoucher()" ng-model="voucher.voucherCode" style="padding: 5px;width: 120px;" type="text" name="name" placeholder="@Model.Translate(2365, "Enter Voucher Code")" />
                    </div>
                    <div class="float-r" ng-cloak>
                        <button style="padding: 5px 15px;" ng-click="GetAmountForVoucher()">@Model.Translate(2366, "Apply")</button>
                    </div>
                </li>
                <li ng-if="voucher.accept == 0" style="margin-bottom: 14px;overflow: hidden;" ng-cloak>
                    <span style="font-size: 12px;color: red;">@Model.Translate(2367, "Sorry, this voucher is not valid. Please check for any typing errors")</span>
                </li>
                <li style="border-top: 1px dotted;">
                    <div class="float-l"><label><strong>@Model.Translate(2368, "Subtotal"):</strong></label></div>
                    <div class="float-r" ng-cloak>
                        @if (currency == "VND")
                        {
                            <span>{{(priceRoom + priceService + priceExtrabed - voucher.amountForVoucher) | currency:'':'0'}}</span>
                        }
                        else
                        {
                            <span>{{(priceRoomExchangeRate + priceServiceExchangeRate + priceExtrabedExchangeRate - voucher.amountForVoucher) | currency:'':'2'}}</span>
                        }
                        <span class="unit-price">{{::currency}}</span>
                    </div>
                </li>
                <li>
                    <div class="float-l"><label><strong>VAT:</strong></label>  <span ng-cloak>({{vat}}%)</span></div>
                    <div class="float-r" ng-cloak>
                        @if (currency == "VND")
                        {
                            <span>{{(priceRoom + priceService + priceExtrabed - voucher.amountForVoucher) *(100 + serviceCharge)* vat/10000  | currency:'':'0'}}</span>
                        }
                        else
                        {
                            <span>{{(priceRoomExchangeRate + priceServiceExchangeRate + priceExtrabedExchangeRate - voucher.amountForVoucher) * vat/100 | currency:'':'2'}}</span>
                        }
                        <span class="unit-price">{{::currency}}</span>
                    </div>
                </li>
                <li>
                    <div class="float-l"> <label><strong>@Model.Translate(2369, "Service charge"):</strong></label> <span ng-cloak>({{serviceCharge}}%)</span></div>
                    <div class="float-r" ng-cloak>
                        @if (currency == "VND")
                        {
                            <span>{{(priceRoom + priceService + priceExtrabed - voucher.amountForVoucher) * serviceCharge/100  | currency:'':'0'}}</span>
                        }
                        else
                        {
                            <span>{{(priceRoomExchangeRate + priceServiceExchangeRate + priceExtrabedExchangeRate - voucher.amountForVoucher) * serviceCharge/100 | currency:'':'2'}}</span>
                        }
                        <span class="unit-price">{{::currency}}</span>
                    </div>
                </li>
                <li style="clear: both;">
                    <div class="float-l"><label><strong>@Model.Translate(2370, "Total amount"):</strong></label></div>
                    <div class="float-r" ng-cloak>
                        @if (currency == "VND")
                        {
                            <span>{{(priceRoom + priceService + priceExtrabed - voucher.amountForVoucher) * (100 + serviceCharge + vat + serviceCharge*vat/100 )/100 | currency:'':'0'}}</span>
                        }
                        else
                        {
                            <span>{{(priceRoomExchangeRate + priceServiceExchangeRate + priceExtrabedExchangeRate - voucher.amountForVoucher) * (100 + serviceCharge + vat+ serviceCharge*vat/100)/100 | currency:'':'2'}}</span>
                        }
                        <span class="unit-price">{{::currency}}</span>
                    </div>
                </li>
                <li>
                    <div class="float-l"><label><strong>@Model.Translate(2371, "Deposit")</strong></label></div>
                    <div class="float-r" ng-cloak>
                        @if (currency == "VND")
                        {
                            <span>{{priceDeposit | currency:'':'0'}}</span>
                        }
                        else
                        {
                            <span>{{priceDepositExchangeRate | currency:'':'2'}}</span>
                        }
                        <span class="unit-price">{{::currency}}</span>
                    </div>
                </li>
                <li>
                    <div class="float-l"><label><strong>@Model.Translate(2372, "Balance due on arrival")</strong></label></div>
                    <div class="float-r" ng-cloak>
                        @if (currency == "VND")
                        {
                            <span>{{(priceRoom + priceService + priceExtrabed - voucher.amountForVoucher) * (100 + serviceCharge + vat+ serviceCharge*vat/100)/100 - priceDeposit| currency:'':'0'}}</span>
                        }
                        else
                        {
                            <span>{{(priceRoomExchangeRate + priceServiceExchangeRate + priceExtrabedExchangeRate - voucher.amountForVoucher) * (100 + serviceCharge + vat+ serviceCharge*vat/100)/100 - priceDepositExchangeRate| currency:'':'2'}}</span>
                        }
                        <span class="unit-price">{{::currency}}</span>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</div>
