@using BookingEnginePMS.Models;
@{
    ViewBag.Title = "Accommodation Types";
    Layout = "~/Areas/Admin/Views/Shared/_LayoutSetting.cshtml";
    List<Extrabed> extrabeds = (List<Extrabed>)ViewData["extrabeds"];
    if(extrabeds is null)
    {
        extrabeds = new List<Extrabed>();
    }
    List<TransitionLanguage> transitions = (List<TransitionLanguage>)Session["transitions"];
    Transition transition = new Transition(transitions);
}
<script>
    $("#AccommodationTypes").addClass("menu-clicked")
</script>
<script>
    $(function () {
        var e = $("#kUI_window")
            , t = $("#kUI_undo");
        if (e.length) {
            var a = e
                , n = t.bind("click", function () {
                    a.data("kendoWindow").open(),
                        n.hide()
                });
            a.data("kendoWindow") || a.kendoWindow({
                width: "600px",
                title: "Information",
                actions: ["Pin", "Minimize", "Maximize", "Close"],
                close: function () {
                    n.show()
                }
            })
        }
    })
</script>
<style>
    input[type=checkbox] {
        position: absolute;
    }
</style>
<script src="~/ckfinder/ckfinder.js"></script>
<script src="~/Areas/Admin/Content/js/RoomType/roomtype.js"></script>
<div id="kUI_window" style="display:none">
    <div>
        <div class="uk-grid uk-margin-bottom">
            <div class="uk-width-medium-1-3 uk-text-center uk-margin-medium-bottom">
                <div class="uk-grid">
                    <div class="uk-width-1 uk-margin-bottom">
                        <label style="margin-bottom: 10px;display: block;">
                            <b>@(transition.Translate(948, "Image"))</b>
                        </label>
                        <img ng-model="roomtype.Image" id="img-logo" ng-src="{{roomtype.Image}}" />
                        <input ng-model="roomtype.Image" id="Logo" style="display:none;" name="Logo" class="upload">
                    </div>
                    <div class="uk-width-1 uk-margin-bottom">
                        <div class="uk-grid">
                            <div class="uk-width-1 uk-margin-bottom">
                                <div class="uk-grid grid-box-gallery">
                                    <div class="uk-width-1-4 box-gallery" ng-repeat="item in roomtype.RoomTypeGalleries track by $index">
                                        <div>
                                            <img ng-src="{{item.Image}}" />
                                            <span ng-click="RemoveGallery($index)">x</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="uk-width-1">
                                <label style="margin-bottom: 10px;display: block;">
                                    <b>@(transition.Translate(949, "Gallery"))</b>
                                </label>
                                <img ng-model="roomtype.GalleryDefault" id="img-logo2" ng-src="{{roomtype.GalleryDefault}}" />
                                <input ng-model="roomtype.GalleryDefault" id="Logo2" class="upload2" style="display:none">
                                <button class="md-btn md-btn-warning" ng-click="AddGallary()">@(transition.Translate(950, "Add Gallery"))</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="uk-width-medium-2-3" style="margin-top: 25px;">
                <div class="uk-grid">
                    <div class="uk-width-1">
                        <div class="uk-grid">
                            <div class="uk-width-2-3 uk-margin-medium-bottom">
                                <label><b>@(transition.Translate(973, "Name")) <span class="star-red">*</span></b></label>
                                <input ng-click="RefreshValidate()" ng-model="roomtype.RoomTypeName" type="text" class="md-input">
                                <span class="md-input-bar "></span>
                                <span id="err_RoomTypeName" class="error">@(transition.Translate(951, "Value is invalid!"))</span>
                            </div>
                            <div class="uk-width-1-3 uk-margin-medium-bottom">
                                <label><b>@(transition.Translate(953, "Code")) <span class="star-red">*</span></b></label>
                                <input ng-click="RefreshValidate()" ng-model="roomtype.RoomTypeCode" type="text" class="md-input">
                                <span class="md-input-bar "></span>
                                <span id="err_RoomTypeCode" class="error">@(transition.Translate(951, "Value is invalid!"))</span>
                            </div>
                            <div class="uk-width-1-3 uk-margin-medium-bottom">
                                <div class="md-input-wrapper">
                                    <label><b>@(transition.Translate(952, "Index"))</b></label>
                                    <input ng-click="RefreshValidate()" ng-model="roomtype.Index" type="number" class="md-input">
                                    <span class="md-input-bar "></span>
                                    <span id="err_Index" class="error">@(transition.Translate(951, "Value is invalid!"))</span>
                                </div>
                            </div>
                            <div class="uk-width-1-3 uk-margin-medium-bottom" style="margin-top: -15px;">
                                <div style="position: relative;">
                                    <label style="color: #727272;font-size: 12px;display: block;padding-left: 5px;"><b>@(transition.Translate(954, "HasExtrabed"))</b></label>
                                    <input ng-click="RefreshValidate()" ng-model="roomtype.HasExtrabed" id="cbHasExtrabed" name="HasExtrabed" type="checkbox">
                                </div>
                            </div>
                            <div class="uk-width-1-3 uk-margin-medium-bottom">
                                <div class="md-input-wrapper {{roomtype.HasExtrabed?'show-item':'hide-item'}}">
                                    <label><b>@(transition.Translate(955, "Extrabed"))</b></label>
                                    <select id="kUI_multiselect_basic" multiple="multiple" data-placeholder="Select Extrabed" class="md-input " style="margin-top: 8px;">
                                        @foreach (Extrabed item in extrabeds)
                                        {
                                            <option value="@item.ExtrabedId">
                                                @item.ExtrabedName
                                            </option>
                                        }
                                    </select>
                                </div>
                            </div>
                            <div class="uk-width-medium-1-4 uk-width-1-2 uk-margin-medium-bottom">
                                <div class="md-input-wrapper">
                                    <label><b>@(transition.Translate(956, "MaxPeople"))</b></label>
                                    <input ng-click="RefreshValidate()" ng-model="roomtype.MaxPeople" type="number" min="0" class="md-input">
                                    <span class="md-input-bar "></span>
                                    <span id="err_MaxPeople" class="error">@(transition.Translate(951, "Value is invalid!"))</span>
                                </div>
                            </div>
                            <div class="uk-width-medium-1-4 uk-width-1-2 uk-margin-medium-bottom">
                                <div class="md-input-wrapper">
                                    <label><b>@(transition.Translate(957, "Adult"))</b></label>
                                    <input ng-click="RefreshValidate()" ng-model="roomtype.Adult" type="number" min="0" class="md-input">
                                    <span class="md-input-bar "></span>
                                    <span id="err_Adult" class="error">@(transition.Translate(951, "Value is invalid!"))</span>
                                </div>
                            </div>
                            <div class="uk-width-medium-1-4 uk-width-1-2 uk-margin-medium-bottom">
                                <div class="md-input-wrapper">
                                    <label><b>@(transition.Translate(958, "Children"))</b></label>
                                    <input ng-click="RefreshValidate()" ng-model="roomtype.Children" type="number" min="0" class="md-input">
                                    <span class="md-input-bar "></span>
                                    <span id="err_Children" class="error">@(transition.Translate(951, "Value is invalid!"))</span>
                                </div>
                            </div>
                            <div class="uk-width-medium-1-4 uk-width-1-2 uk-margin-medium-bottom">
                                <div class="md-input-wrapper">
                                    <label><b>@(transition.Translate(959, "Size"))</b></label>
                                    <input ng-click="RefreshValidate()" ng-model="roomtype.Size" type="text" class="md-input">
                                    <span class="md-input-bar "></span>
                                    <span id="err_Size" class="error">@(transition.Translate(951, "Value is invalid!"))</span>
                                </div>
                            </div>
                            <div class="uk-width-1 uk-margin-medium-bottom">
                                <div class="uk-grid">
                                    <div class="uk-width-1-2">
                                        <label><b>@(transition.Translate(960, "Extrabed Option"))</b></label>
                                    </div>
                                    <div class="uk-width-1-2 uk-text-right box-not-render-span">
                                        <select ng-click="ChangeLanguage()" ng-model="languageChoose" class="box-language md-input" convert-to-number>
                                            <option value="{{item.LanguageId}}" ng-repeat="item in language">
                                                <text>{{item.Title}}</text>
                                            </option>
                                        </select>
                                    </div>
                                    <div class="uk-width-1">
                                        <textarea ng-click="RefreshValidate()" ng-model="ModelRoomType.ExtrabedOption" rows="2" class="md-input"></textarea>
                                        <span class="md-input-bar "></span>
                                    </div>
                                </div>
                            </div>
                            <div class="uk-width-1 uk-margin-medium-bottom">
                                <div class="uk-grid">
                                    <div class="uk-width-1-2">
                                        <label><b>@(transition.Translate(961, "Type"))</b></label>
                                    </div>
                                    <div class="uk-width-1-2 uk-text-right box-not-render-span">
                                        <select ng-click="ChangeLanguage()" ng-model="languageChoose" class="box-language md-input" convert-to-number>
                                            <option value="{{item.LanguageId}}" ng-repeat="item in language">
                                                <text>{{item.Title}}</text>
                                            </option>
                                        </select>
                                    </div>
                                    <div class="uk-width-1">
                                        <textarea ng-click="RefreshValidate()" ng-model="ModelRoomType.DescriptionBed" rows="2" class="md-input"></textarea>
                                        <span class="md-input-bar "></span>
                                    </div>
                                </div>
                            </div>
                            <div class="uk-width-1 uk-margin-medium-bottom">
                                <div class="uk-grid">
                                    <div class="uk-width-1-2">
                                        <label><b>@(transition.Translate(962, "View"))</b></label>
                                    </div>
                                    <div class="uk-width-1-2 uk-text-right box-not-render-span">
                                        <select ng-click="ChangeLanguage()" ng-model="languageChoose" class="box-language md-input" convert-to-number>
                                            <option value="{{item.LanguageId}}" ng-repeat="item in language">
                                                <text>{{item.Title}}</text>
                                            </option>
                                        </select>
                                    </div>
                                    <div class="uk-width-1">
                                        <textarea ng-click="RefreshValidate()" ng-model="ModelRoomType.DescriptionView" rows="2" class="md-input"></textarea>
                                        <span class="md-input-bar "></span>
                                    </div>
                                </div>
                            </div>
                            <div class="uk-width-1 uk-margin-medium-bottom">
                                <div class="uk-grid">
                                    <div class="uk-width-1-2">
                                        <label><b>@(transition.Translate(963, "Description"))</b></label>
                                    </div>
                                    <div class="uk-width-1-2 uk-text-right box-not-render-span">
                                        <select ng-click="ChangeLanguage()" ng-model="languageChoose" class="box-language md-input" convert-to-number>
                                            <option value="{{item.LanguageId}}" ng-repeat="item in language">
                                                <text>{{item.Title}}</text>
                                            </option>
                                        </select>
                                    </div>
                                    <div class="uk-width-1">
                                        <textarea ng-click="RefreshValidate()" ng-model="ModelRoomType.Note" rows="2" class="md-input"></textarea>
                                        <span class="md-input-bar "></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="uk-grid box-edit-booking">
            <div class="uk-width-1 uk-text-right" style="padding-right: 50px;">
                <button class="md-btn md-btn-new" ng-click="Post()" ng-if="isAdd">@(transition.Translate(964, "Add"))</button>
                <button class="md-btn md-btn-new" ng-click="Put()" ng-if="!isAdd">@(transition.Translate(965, "Update"))</button>
                <button class="md-btn md-btn-danger" ng-click="CloseWindow()">@(transition.Translate(966, "Cancel"))</button>
            </div>
        </div>
    </div>
</div>
<div class="uk-grid">
    <div class="uk-width-1-1 uk-margin-medium-bottom">
        <h3>@(transition.Translate(889, "Accommodation")) </h3>
    </div>
    <div class="uk-width-1-1 uk-margin-small-bottom">
        <div class="uk-grid">
            <div class="uk-width-1-3">
                <div class="uk-input-group">
                    <div class="md-input-wrapper">
                        <label><b>@(transition.Translate(967, "Key Search"))</b></label>
                        <input ng-model="filters.keySearch" type="text" class="md-input" placeholder="Name">
                        <span class="md-input-bar "></span>
                    </div>
                    <span class="uk-input-group-addon" ng-click="GetData()">
                        <a class="md-btn md-btn-new md-btn-wave-light">@(transition.Translate(968, "Search"))</a>
                    </span>
                </div>
            </div>
            <div class="uk-width-2-3 uk-text-right">
                <button class="md-btn md-btn-new md-btn-wave-light" ng-click="ShowAdd()">@(transition.Translate(969, "Add New"))</button>
            </div>
        </div>
    </div>
    <div class="uk-width-1-1">
        <div ui-grid="gridOptions" ui-grid-selection ui-grid-resize-columns ui-grid-move-columns
             ui-grid-pinning ui-grid-pagination ui-grid-exporter class="grid box-grid"></div>
    </div>
</div>
<div id="ModalConfirm" class="uk-modal">
    <div class="uk-modal-dialog">
        <button type="button" class="uk-modal-close uk-close"></button>
        <h2 class="heading_a">@(transition.Translate(970, "Warning!"))</h2>
        <div>
            <div class="uk-grid uk-margin-bottom">
                <div class="uk-width-1">
                    <h4>@(transition.Translate(971, "Are you sure you want to delete this accommodation ?"))</h4>
                </div>
            </div>
            <div class="uk-grid">
                <div class="uk-width-1 uk-text-right">
                    <button class="md-btn md-btn-danger" ng-click="Delete()">@(transition.Translate(972, "Delete"))</button>
                    <button class="md-btn uk-modal-close uk-close">@(transition.Translate(966, "Cancel"))</button>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    $(document).ready(function () {
        if (!$('.button-upload').length > 0) {
            var upload;
            var textBox = $('.upload');
            for (var i = 0; i < textBox.length; i++) {
                var uploadText = $(textBox[i]);
                uploadText.css('width', uploadText.width() - 70);
                uploadText.after('<button type="button" for="' + uploadText.attr('id') + '" class="button-upload md-btn md-btn-new md-btn-wave-light">@(transition.Translate(989, "Upload"))</button>');
                $('.button-upload').click(function () {
                    upload = $(this);
                    // You can use the "CKFinder" class to render CKFinder in a page:
                    var finder = new CKFinder();
                    finder.basePath = '../files';
                    finder.selectActionFunction = setFileField;
                    finder.popup();
                });
                function setFileField(fileUrl) {
                    $('#' + $(upload).attr('for')).val(fileUrl);
                    $("#img-logo").attr("src", fileUrl)
                }
            }
        }
        if (!$('.button-upload2').length > 0) {
            var upload;
            var textBox = $('.upload2');
            for (var i = 0; i < textBox.length; i++) {
                var uploadText = $(textBox[i]);
                uploadText.css('width', uploadText.width() - 70);
                uploadText.after('<button type="button" for="' + uploadText.attr('id') + '" class="button-upload2 md-btn md-btn-new md-btn-wave-light">@(transition.Translate(989, "Upload"))</button>');
                $('.button-upload2').click(function () {
                    upload = $(this);
                    // You can use the "CKFinder" class to render CKFinder in a page:
                    var finder = new CKFinder();
                    finder.basePath = '../files';
                    finder.selectActionFunction = setFileField;
                    finder.popup();
                });
                function setFileField(fileUrl) {
                    $('#' + $(upload).attr('for')).val(fileUrl);
                    $("#img-logo2").attr("src", fileUrl)
                }
            }
        }
    })
</script>