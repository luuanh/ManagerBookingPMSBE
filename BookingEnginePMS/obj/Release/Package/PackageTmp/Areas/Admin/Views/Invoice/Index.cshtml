@using BookingEnginePMS.Models;
@{
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
    List<TransitionLanguage> transitions = (List<TransitionLanguage>)Session["transitions"];
    Transition transition = new Transition(transitions);
}
<script>
    $("#menu_11").addClass('click-menu-top')
</script>
<script>
    $(function () {
        var e = $("#kUI_window")
            , t = $("#kUI_undo");
        if (e.length) {
            var a = e
                , n = t.bind("click", function () {
                    a.data("kendoWindow").open(),
                        n.hide()
                });
            a.data("kendoWindow") || a.kendoWindow({
                width: "600px",
                title: "Information",
                actions: ["Pin", "Minimize", "Maximize", "Close"],
                close: function () {
                    n.show()
                }
            })
        }
    })
</script>
<style>
    .uk-comment .uk-comment-body > div {
        padding: 0px 55px;
    }
</style>
<script src="~/Areas/Admin/Content/js/Invoice/invoice.js"></script>
<div id="kUI_window" style="display:none;padding-top: 24px !IMPORTANT;">
    <div>
        <div class="uk-grid uk-margin-bottom">
            <div class="uk-width-1 uk-margin-medium-bottom">
                <h2>@(transition.Translate(794, "Invoice"))</h2>
                <hr />
            </div>
            <div class="uk-width-1 uk-margin-bottom">
                <div class="uk-grid">
                    <div class="uk-width-medium-1-6"></div>
                    <div class="uk-width-medium-3-6">
                        <div class="uk-grid">
                            <div class="uk-width-1 uk-margin-medium-bottom">
                                <div class="uk-grid">
                                    <div class="uk-width-2-3">
                                        <div class="md-input-wrapper">
                                            <label><b>@(transition.Translate(797, "Guest's Name")) <span class="star-red">*</span></b></label>
                                            <input ng-click="RefreshValidate()" ng-model="invoice.CustomerName" type="text" class="md-input">
                                            <span class="md-input-bar "></span>
                                            <span id="err_CustomerName" class="error">@(transition.Translate(798, "Value is invalid!"))</span>
                                        </div>
                                    </div>
                                    <div class="uk-width-1-3 uk-text-right">
                                        <a href="http://gmail.com" target="_blank" class="md-btn md-btn-wave-light md-btn-new">@(transition.Translate(796, "Send Email"))</a>
                                    </div>
                                </div>
                            </div>
                            <div class="uk-width-1 uk-margin-medium-bottom">
                                <div class="md-input-wrapper">
                                    <label><b>@(transition.Translate(799, "Phone"))</b></label>
                                    <input ng-click="RefreshValidate()" ng-model="invoice.Phone" type="text" class="md-input">
                                    <span class="md-input-bar "></span>
                                </div>
                            </div>
                            <div class="uk-width-1 uk-margin-medium-bottom">
                                <div class="md-input-wrapper">
                                    <label><b>@(transition.Translate(800, "Email")) <span class="star-red">*</span></b></label>
                                    <input ng-click="RefreshValidate()" ng-model="invoice.Email" type="text" class="md-input">
                                    <span class="md-input-bar "></span>
                                    <span id="err_Email" class="error">@(transition.Translate(798, "Value is invalid!"))</span>
                                </div>
                            </div>
                            <div class="uk-width-1 uk-margin-medium-bottom">
                                <div class="uk-grid">
                                    <div class="uk-width-large-1-3 uk-width-medium-1-2">
                                        <div class="uk-input-group">
                                            <div class="md-input-wrapper box-not-render-span">
                                                <label><b>@(transition.Translate(801, "Arrival Date")) <span class="star-red">*</span></b></label>
                                                <input ng-click="RefreshValidate()" data-uk-datepicker="{format:'DD-MM-YYYY'}" id="ArrivalDate" ng-model="ArrivalDate" type="text" class="md-input">
                                                <span class="md-input-bar "></span>
                                            </div>
                                            <span class="uk-input-group-addon"><i class="uk-input-group-icon uk-icon-calendar"></i></span>
                                        </div>
                                        <span id="err_ArrivalDate" class="error">@(transition.Translate(798, "Value is invalid!"))</span>
                                    </div>
                                </div>
                            </div>
                            <div class="uk-width-1 uk-margin-medium-bottom">
                                <div class="uk-grid">
                                    <div class="uk-width-large-1-3 uk-width-medium-1-2 uk-margin-medium-bottom">
                                        <div class="md-input-wrapper">
                                            <label><b>@(transition.Translate(802, "Total Amount")) <span class="star-red">*</span></b></label>
                                            <input ng-click="RefreshValidate()" ng-model="invoice.TotalAmount" type="text" class="md-input">
                                            <span class="md-input-bar "></span>
                                            <span id="err_TotalAmount" class="error">@(transition.Translate(798, "Value is invalid!"))</span>
                                        </div>
                                    </div>
                                    <div class="uk-width-large-2-3 uk-width-medium-1-2">
                                        <div class="md-input-wrapper box-not-render-span">
                                            <label><b>@(transition.Translate(803, "Currency"))</b></label>
                                            <select ng-click="RefreshValidate()" ng-model="invoice.CurrencyCode" class="md-input" style="width:100px">
                                                <option value="{{item.CurrencyCode}}" ng-repeat="item in currencies">
                                                    {{item.CurrencyCode}} ({{item.Key}})
                                                </option>
                                            </select>
                                            <span class="md-input-bar "></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="uk-width-1 uk-margin-medium-bottom">
                                <div class="md-input-wrapper">
                                    <label><b>@(transition.Translate(804, "Description"))</b></label>
                                    <textarea ng-click="RefreshValidate()" ng-model="invoice.Description" class="md-input" rows="3"></textarea>
                                    <span class="md-input-bar "></span>
                                </div>
                            </div>
                            <div class="uk-width-1 uk-margin-medium-bottom">
                                <div class="md-input-wrapper">
                                    <label><b>@(transition.Translate(805, "Link"))</b></label>
                                    <input ng-if="isAdd" ng-model="invoice.Link + invoice.Email" type="text" class="md-input">
                                    <input ng-if="!isAdd" ng-model="invoice.Link" type="text" class="md-input">
                                    <span class="md-input-bar "></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="uk-width-medium-2-6">
                        <div class="uk-grid">
                            <div class="uk-width-1 uk-margin-medium-bottom">
                                <div class="md-input-wrapper box-not-render-span">
                                    <label><b>@(transition.Translate(806, "Name on card"))</b></label>
                                    <input type="text" disabled ng-model="invoice.NameOnCard" class="md-input" />
                                    <span class="md-input-bar "></span>
                                </div>
                            </div>
                            <div class="uk-width-1 uk-margin-medium-bottom">
                                <div class="md-input-wrapper box-not-render-span">
                                    <label><b>@(transition.Translate(807, "Card number"))</b></label>
                                    <input type="text" disabled ng-model="invoice.CardNumber" class="md-input" />
                                    <span class="md-input-bar "></span>
                                </div>
                            </div>
                            <div class="uk-width-1 uk-margin-medium-bottom">
                                <div class="uk-input-group">
                                    <div class="md-input-wrapper box-not-render-span">
                                        <label><b>@(transition.Translate(808, "Card security code"))</b></label>
                                        <input id="sercurityCode" type="password" disabled ng-model="invoice.SecurityCode" class="md-input" />
                                        <span class="md-input-bar "></span>
                                    </div>
                                    <span class="uk-input-group-addon" style="padding: 0 5px;">
                                        <i ng-if="showSercurityCode" ng-click="showHideSercurityCode()" class="uk-icon-eye-slash"></i>
                                        <i ng-if="!showSercurityCode" ng-click="showHideSercurityCode()" class="uk-icon-eye"></i>
                                    </span>
                                </div>
                            </div>
                            <div class="uk-width-1 uk-margin-bottom">
                                <div class="md-input-wrapper box-not-render-span">
                                    <label><b>@(transition.Translate(809, "Expiry date"))</b></label>
                                    <input type="text" disabled value="{{(invoice.ExprireMonth < 0?'N/A':invoice.ExprireMonth)}} / {{(invoice.ExprireYear < 0?'N/A':invoice.ExprireYear)}}" class="md-input" />
                                    <span class="md-input-bar "></span>
                                </div>
                            </div>
                            <div class="uk-width-1 uk-margin-medium-bottom">
                                <button class="md-btn md-btn-new md-btn-wave-light" ng-click="Paid(invoice.InvoiceId)">@(transition.Translate(811, "Paid"))</button>
                                <button class="md-btn md-btn-danger md-btn-wave-light" style="float:right" ng-click="ClearCard(invoice.InvoiceId)">@(transition.Translate(810, "Clear card"))</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="uk-grid">
            <div class="uk-width-1 box-edit-booking uk-text-right">
                <button class="md-btn md-btn-new" ng-click="Post()" ng-if="isAdd">@(transition.Translate(812, "Add"))</button>
                <button class="md-btn md-btn-new" ng-click="Put()" ng-if="!isAdd">@(transition.Translate(813, "Update"))</button>
                <button class="md-btn" ng-click="CloseWindow()">@(transition.Translate(814, "Cancel"))</button>
            </div>
        </div>
    </div>
</div>
<div class="uk-grid">
    <div class="uk-width-1-1 uk-margin-medium-bottom">
        <h3>@(transition.Translate(794, "Invoice"))</h3>
        <hr />
        <p style="font-size: 12px;">
            @(transition.Translate(815, "tipInvoice"))
        </p>
        <hr />
    </div>
    <div class="uk-width-1-1 uk-margin-small-bottom">
        <div class="uk-grid">
            <div class="uk-width-large-1-6 uk-width-medium-1-3 uk-margin-medium-bottom">
                <div class="uk-input-group">
                    <div class="md-input-wrapper">
                        <label><b>@(transition.Translate(816, "From date"))</b></label>
                        <input id="FromDate" data-uk-datepicker="{format:'DD-MM-YYYY'}" autocomplete="off" ng-model="FromDate" type="text" class="md-input">
                        <span class="md-input-bar "></span>
                    </div>
                    <span class="uk-input-group-addon"><i class="uk-input-group-icon uk-icon-calendar"></i></span>
                </div>
            </div>
            <div class="uk-width-large-1-6 uk-width-medium-1-3 uk-margin-medium-bottom">
                <div class="uk-input-group">
                    <div class="md-input-wrapper">
                        <label><b>@(transition.Translate(817, "To date"))</b></label>
                        <input id="ToDate" data-uk-datepicker="{format:'DD-MM-YYYY'}" autocomplete="off" ng-model="ToDate" type="text" class="md-input">
                        <span class="md-input-bar "></span>
                    </div>
                    <span class="uk-input-group-addon"><i class="uk-input-group-icon uk-icon-calendar"></i></span>
                </div>
            </div>
            <div class="uk-width-large-1-6 uk-width-medium-1-3 uk-margin-medium-bottom">
                <div class="md-input-wrapper">
                    <label><b>@(transition.Translate(818, "Status"))</b></label>
                    <select ng-model="filters.status" class="md-input" covnert-to-number>
                        <option value="-1">@(transition.Translate(819, "All"))</option>
                        <option value="1">@(transition.Translate(811, "Paid"))</option>
                        <option value="0">@(transition.Translate(820, "UnPaid"))</option>
                    </select>
                    <span class="md-input-bar "></span>
                </div>
            </div>
            <div class="uk-width-large-1-6 uk-width-medium-1-3 uk-margin-medium-bottom">
                <div class="md-input-wrapper">
                    <label><b>@(transition.Translate(821, "FeedBack"))</b></label>
                    <select ng-model="filters.feedback" class="md-input" covnert-to-number>
                        <option value="-1">@(transition.Translate(819, "All"))</option>
                        <option value="1">@(transition.Translate(821, "FeedBack"))</option>
                        <option value="0">@(transition.Translate(822, "Not FeedBack"))</option>
                    </select>
                    <span class="md-input-bar "></span>
                </div>
            </div>
            <div class="uk-width-large-2-6 uk-width-medium-2-3 uk-margin-medium-bottom">
                <div class="uk-grid">
                    <div class="uk-width-medium-1 uk-margin-bottom">
                        <div class="uk-input-group">
                            <div class="md-input-wrapper">
                                <label><b>@(transition.Translate(823, "Key Search"))</b></label>
                                <input ng-model="filters.keySearch" type="text" class="md-input" placeholder="Folio, guest">
                                <span class="md-input-bar "></span>
                            </div>
                            <span class="uk-input-group-addon" style="padding: 0 5px;">
                                <a class="md-btn md-btn-new md-btn-wave-light" ng-click="GetData()">@(transition.Translate(824, "Search"))</a>
                                <a class="md-btn md-btn-new md-btn-wave-light" ng-click="ShowAdd()">@(transition.Translate(825, "New Invoice"))</a>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="uk-width-1-1">
        <div ui-grid="gridOptions" ui-grid-selection ui-grid-resize-columns ui-grid-move-columns
             ui-grid-pinning ui-grid-pagination ui-grid-exporter class="grid box-grid"></div>
    </div>
</div>
<div id="ModalConfirm" class="uk-modal">
    <div class="uk-modal-dialog">
        <button type="button" class="uk-modal-close uk-close"></button>
        <h2 class="heading_a">@(transition.Translate(826, "Warning!"))</h2>
        <div>
            <div class="uk-grid uk-margin-bottom">
                <div class="uk-width-1">
                    <h4>@(transition.Translate(827, "Are you sure you want to delete this invoice?"))</h4>
                </div>
            </div>
            <div class="uk-grid">
                <div class="uk-width-1 uk-text-right">
                    <button class="md-btn md-btn-danger" ng-click="Delete()">@(transition.Translate(828, "Delete"))</button>
                    <button class="md-btn uk-modal-close uk-close">@(transition.Translate(814, "Cancel"))</button>
                </div>
            </div>
        </div>
    </div>
</div>