@using BookingEnginePMS.Models;
@using Newtonsoft.Json;
@{
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
    List<Service> services = (List<Service>)ViewData["services"];
    List<RoomType> roomTypes = (List<RoomType>)ViewData["roomTypes"];
    string jsonRoomType = JsonConvert.SerializeObject(from item in roomTypes select item.RoomTypeId);
    string jsonService = JsonConvert.SerializeObject(from item in services select item.ServiceId);
    List<TransitionLanguage> transitions = (List<TransitionLanguage>)Session["transitions"];
    Transition transition = new Transition(transitions);
}
<script>
    $("#menu_7").addClass('click-menu-top')
</script>
<script>
    $(function () {
        var e = $("#kUI_window")
            , t = $("#kUI_undo");
        if (e.length) {
            var a = e
                , n = t.bind("click", function () {
                    a.data("kendoWindow").open(),
                        n.hide()
                });
            a.data("kendoWindow") || a.kendoWindow({
                width: "600px",
                title: "Information",
                actions: ["Pin", "Minimize", "Maximize", "Close"],
                close: function () {
                    n.show()
                }
            })
        }
    })
</script>
<style>
    .checkbox-fix-location {
        position: relative;
    }

        .checkbox-fix-location > input {
            position: absolute;
            top: 6px;
            left: 10px;
        }

        .checkbox-fix-location > span {
            padding-left: 15px;
        }
</style>
<input type="hidden" id="roomtypeHidden" name="name" value="@jsonRoomType" />
<input type="hidden" id="serviceHidden" name="name" value="@jsonService" />
<script src="~/Areas/Admin/Content/js/Voucher/voucher.js"></script>
<div id="kUI_window" style="display:none">
    <div>
        <div class="uk-grid uk-margin-bottom">
            <div class="uk-width-1 uk-margin-medium-bottom">
                <h2>@(transition.Translate(769, "Voucher"))</h2>
                <hr />
                <p style="font-size: 12px;">
                    @(transition.Translate(770, "tipAddVoucher"))
                </p>
                <hr />
            </div>
            <div class="uk-width-1 uk-margin-medium-bottom">
                <div class="uk-grid">
                    <div class="uk-width-1-2">
                        <div class="md-input-wrapper">
                            <label><b>@(transition.Translate(771, "Voucher Name")) <span class="star-red">*</span></b></label>
                            <input ng-click="RefreshValidate()" ng-model="voucher.VoucherName" type="text" class="md-input" />
                            <span class="md-input-bar "></span>
                            <span id="err_VoucherName" class="error">@(transition.Translate(772, "Value is invalid!"))</span>
                        </div>
                    </div>
                    <div class="uk-width-1-2">
                        <div class="md-input-wrapper">
                            <label><b>@(transition.Translate(773, "Code")) <span class="star-red">*</span></b></label>
                            <input ng-click="RefreshValidate()" ng-model="voucher.VoucherCode" type="text" class="md-input" />
                            <span class="md-input-bar "></span>
                            <span id="err_VoucherCode" class="error">@(transition.Translate(772, "Value is invalid!"))</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="uk-width-1 uk-margin-medium-bottom">
                <div class="uk-grid">
                    <div class="uk-width-1-2">
                        <div class="uk-input-group">
                            <div class="md-input-wrapper">
                                <label><b>@(transition.Translate(774, "From Date"))<span class="star-red">*</span></b></label>
                                <input ng-click="RefreshValidate()" data-uk-datepicker="{format:'DD-MM-YYYY'}" id="FromDate" ng-model="FromDate" type="text" class="md-input" />
                                <span class="md-input-bar "></span>
                                <span id="err_FromDate" class="error">@(transition.Translate(772, "Value is invalid!"))</span>
                            </div>
                            <span class="uk-input-group-addon"><i class="uk-input-group-icon uk-icon-calendar"></i></span>
                        </div>
                    </div>
                    <div class="uk-width-1-2">
                        <div class="uk-input-group">
                            <div class="md-input-wrapper">
                                <label><b>@(transition.Translate(775, "To Date")) <span class="star-red">*</span></b></label>
                                <input ng-click="RefreshValidate()" data-uk-datepicker="{format:'DD-MM-YYYY'}" id="ToDate" ng-model="ToDate" type="text" class="md-input" />
                                <span class="md-input-bar "></span>
                                <span id="err_ToDate" class="error">@(transition.Translate(772, "Value is invalid!"))</span>
                            </div>
                            <span class="uk-input-group-addon"><i class="uk-input-group-icon uk-icon-calendar"></i></span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="uk-width-1 uk-margin-medium-bottom">
                <div class="uk-grid">
                    <div class="uk-width-medium-1-2 uk-margin-medium-bottom">
                        <div class="uk-input-group">
                            <span class="uk-input-group-addon" style="padding-left: 0;">
                                <label class="md-btn md-btn-success md-btn-wave-light checkbox-fix-location">
                                    <input ng-model="voucher.DiscountForRoom" type="checkbox" name="name" value="" />
                                    <span>@(transition.Translate(776, "Discount For Room"))</span>
                                </label>
                            </span>
                            <div ng-if="voucher.DiscountForRoom" class="md-input-wrapper" style="height: 30px;">
                                <label><b>@(transition.Translate(777, "Discount rate")) (%)</b></label>
                                <input ng-model="voucher.AmountForRoom" type="text" class="md-input">
                            </div>
                            <span ng-if="voucher.DiscountForRoom"  class="uk-input-group-addon">%</span>
                        </div>
                    </div>
                    <div class="uk-width-medium-1-2">
                        <div class="md-input-wrapper {{voucher.DiscountForRoom? 'show-item':'hide-item'}}">
                            <label><b>@(transition.Translate(778, "Apply Accommodation"))</b></label>
                            <select id="kUI_multiselect_basic" multiple="multiple" data-placeholder="@(transition.Translate(2351, "Select Accom"))" class="md-input">
                                @foreach (RoomType item in roomTypes)
                                {
                                    <option selected value="@item.RoomTypeId">@item.RoomTypeName</option>
                                }
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            <div class="uk-width-1 uk-margin-medium-bottom">
                <div class="uk-grid">
                    <div class="uk-width-medium-1-2 uk-margin-medium-bottom">
                        <div class="uk-input-group">
                            <span class="uk-input-group-addon" style="padding-left: 0;">
                                <label class="md-btn md-btn-success md-btn-wave-light checkbox-fix-location">
                                    <input ng-model="voucher.DiscountForService" type="checkbox" name="name" value="" />
                                    <span>@(transition.Translate(779, "Discount For Service"))</span>
                                </label>
                            </span>
                            <div ng-if="voucher.DiscountForService" class="md-input-wrapper" style="height: 30px;">
                                <label><b>@(transition.Translate(780, "Discount rate")) (%)</b></label>
                                <input ng-model="voucher.AmountForService" type="text" class="md-input">
                            </div>
                            <span ng-if="voucher.DiscountForService" class="uk-input-group-addon">%</span>
                        </div>
                    </div>
                    <div class="uk-width-medium-1-2">
                        <div class="md-input-wrapper {{voucher.DiscountForService? 'show-item':'hide-item'}}">
                            <label><b>@(transition.Translate(781, "Apply Service"))</b></label>
                            <select id="kUI_multiselect_basic2" multiple="multiple" data-placeholder="@(transition.Translate(2352, "Select Service"))" class="md-input">
                                @foreach (Service item in services)
                                {
                                    <option selected value="@item.ServiceId">@item.ServiceName</option>
                                }
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            <div class="uk-width-1 uk-margin-medium-bottom">
                <div class="uk-grid">
                    <div class="uk-width-1-2">
                        <div class="md-input-wrapper">
                            <label><b>@(transition.Translate(782, "Number"))</b></label>
                            <input ng-click="RefreshValidate()" ng-model="voucher.Number" type="number" class="md-input" />
                            <span class="md-input-bar "></span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="uk-width-1 uk-margin-medium-bottom">
                <div class="md-input-wrapper">
                    <div class="uk-grid">
                        <div class="uk-width-1-2">
                            <label class="lable-config"><b>@(transition.Translate(783, "Description"))</b></label>
                        </div>
                        <div class="uk-width-1-2 uk-text-right box-not-render-span">
                            <select ng-click="ChangeLanguage()" ng-model="languageChoose" class="md-input box-language" convert-to-number>
                                <option value="{{item.LanguageId}}" ng-repeat="item in language">
                                    <text>{{item.Title}}</text>
                                </option>
                            </select>
                        </div>
                        <div class="uk-width-1" style="margin-top: 5px;">
                            <textarea ng-click="RefreshValidate()" rows="3" ng-model="ModelVoucher.Description" class="md-input"></textarea>
                            <span class="md-input-bar "></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="uk-grid">
            <div class="uk-width-1 box-edit-booking uk-text-right">
                <button class="md-btn md-btn-new md-btn-wave-light" ng-click="Post()" ng-if="isAdd">@(transition.Translate(784, "Add"))</button>
                <button class="md-btn md-btn-new md-btn-wave-light" ng-click="Put()" ng-if="!isAdd">@(transition.Translate(785, "Update"))</button>
                <button class="md-btn md-btn-danger md-btn-wave-light" ng-click="CloseWindow()">@(transition.Translate(786, "Cancel"))</button>
            </div>
        </div>
    </div>
</div>
<div class="uk-grid">
    <div class="uk-width-1-1 uk-margin-medium-bottom">
        <h3>@(transition.Translate(769, "Voucher"))</h3>
        <hr />
        <p style="font-size: 12px;">
            @(transition.Translate(787, "tipVoucher"))
        </p>
        <hr />
    </div>
    <div class="uk-width-1-1 uk-margin-small-bottom">
        <div class="uk-grid">
            <div class="uk-width-medium-1-3 uk-margin-bottom">
                <div class="uk-input-group">
                    <div class="md-input-wrapper">
                        <label><b>@(transition.Translate(788, "Key Search"))</b></label>
                        <input ng-model="filters.keySearch" type="text" class="md-input" placeholder="Name, Code">
                        <span class="md-input-bar "></span>
                    </div>
                    <span class="uk-input-group-addon" ng-click="GetData()">
                        <a class="md-btn md-btn-new md-btn-wave-light">@(transition.Translate(789, "Search"))</a>
                    </span>
                </div>
            </div>
            <div class="uk-width-medium-2-3 uk-text-right">
                <button class="md-btn md-btn-new md-btn-wave-light" ng-click="ShowAdd()">@(transition.Translate(790, "Add New"))</button>
            </div>
        </div>
    </div>
    <div class="uk-width-1-1">
        <div ui-grid="gridOptions" ui-grid-selection ui-grid-resize-columns ui-grid-move-columns
             ui-grid-pinning ui-grid-pagination ui-grid-exporter class="grid box-grid"></div>
    </div>
</div>
<div id="ModalConfirm" class="uk-modal">
    <div class="uk-modal-dialog">
        <button type="button" class="uk-modal-close uk-close"></button>
        <h2 class="heading_a">@(transition.Translate(791, "Warning!"))</h2>
        <div>
            <div class="uk-grid uk-margin-bottom">
                <div class="uk-width-1">
                    <h4>@(transition.Translate(792, "Are you sure you want to delete this voucher?"))</h4>
                </div>
            </div>
            <div class="uk-grid">
                <div class="uk-width-1 uk-text-right">
                    <button class="md-btn md-btn-danger" ng-click="Delete()">@(transition.Translate(793, "Delete"))</button>
                    <button class="md-btn uk-modal-close uk-close">@(transition.Translate(786, "Cancel"))</button>
                </div>
            </div>
        </div>
    </div>
</div>
