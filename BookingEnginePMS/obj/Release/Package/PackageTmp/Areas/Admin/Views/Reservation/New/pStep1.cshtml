@using BookingEnginePMS.Models;
@model Transition
<div class="uk-grid">
    <div class="uk-width-1 uk-margin-bottom">
        <div class="uk-grid">
            <div class="uk-width-medium-1-3 uk-margin-bottom">
                <div class="md-input-wrapper">
                    <label><b>@Model.Translate(81, "Booking Type")</b></label>
                    <div style="margin-top: 5px;">
                        <label style="margin-right: 15px;">
                            <input ng-click="RefreshValidate()" ng-model="data.TypeReservation" value="0" type="radio" class="md-input" convert-to-number>
                            <span>@Model.Translate(82, "Day")</span>
                        </label>
                        <label>
                            <input ng-click="RefreshValidate()" ng-model="data.TypeReservation" value="1" type="radio" class="md-input" convert-to-number>
                            <span>@Model.Translate(83, "Hour")</span>
                        </label>
                    </div>
                </div>
            </div>
            <div class="uk-width-medium-1-3 uk-margin-bottom">
                <div class="md-input-wrapper">
                    <label><b>@Model.Translate(84, "Reminiscent Name") </b></label>
                    <input ng-click="RefreshValidate()" type="text" ng-model="data.ReminiscentName" class="md-input" />
                    <span class="md-input-bar "></span>
                </div>
            </div>
            <div class="uk-width-medium-1-3">
                <div class="md-input-wrapper">
                    <label><b>@Model.Translate(85, "Color") </b></label>
                    <input type="color" ng-model="data.Color" style="width: 100px;" />
                </div>
            </div>
        </div>
    </div>
    <div class="uk-width-1 uk-margin-bottom">
        <div class="uk-grid">
            <div class="uk-width-medium-1-3 uk-width-1-2 uk-margin-bottom">
                <div class="uk-grid">
                    <div class="uk-width-1-2">
                        <div class="md-input-wrapper">
                            <label><b>@Model.Translate(86, "Adult")</b></label>
                            <input ng-click="RefreshValidate()" type="number" ng-model="data.Adult" class="md-input" />
                            <span class="md-input-bar "></span>
                        </div>
                    </div>
                    <div class="uk-width-1-2">
                        <div class="md-input-wrapper">
                            <label><b>@Model.Translate(87, "Children") </b></label>
                            <input ng-click="RefreshValidate()" type="number" ng-model="data.Children" class="md-input" />
                            <span class="md-input-bar "></span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="uk-width-medium-1-3 uk-width-1-2 uk-margin-bottom">
                <div class="md-input-wrapper">
                    <label><b>@Model.Translate(88, "Voucher") </b></label>
                    <input ng-click="RefreshValidate()" type="text" ng-model="data.Voucher" class="md-input" />
                    <span class="md-input-bar "></span>
                    <span id="err_Voucher" class="error">@Model.Translate(89, "Value is invalid")!</span>
                </div>
            </div>
            <div class="uk-width-medium-1-3">
                <div class="md-input-wrapper">
                    <label><b>@Model.Translate(90, "Booking Source") </b></label>
                    <select ng-model="data.BookingSource" class="md-input" convert-to-number>
                        <option value="1">Walk-in / Telephone</option>
                        <option value="2">Online Booking Engine</option>
                        <option value="3">Booking.com</option>
                        <option value="4">Expedia</option>
                        <option value="5">Agoda</option>
                        <option value="6">Trip Connect</option>
                        <option value="7">AirBNB</option>
                        <option value="8">Hostelworld</option>
                        <option value="9">Myallocator</option>
                        <option value="10">Company</option>
                        <option value="11">Guest Member</option>
                        <option value="12">Owner</option>
                        <option value="13">Returning Guest</option>
                        <option value="14">Apartment</option>
                        <option value="15">Siteminder</option>
                        <option value="16">Other Travel Agency</option>
                    </select>
                    <span class="md-input-bar "></span>
                </div>
            </div>
        </div>
    </div>
    <div class="uk-width-1 uk-margin-small-bottom">
        <div class="uk-grid">
            <div class="uk-width-medium-1-2 uk-margin-bottom">
                <div class="uk-grid">
                    <div class="uk-width-large-1-2 uk-width-medium-1-2 uk-width-2-3">
                        <div class="uk-input-group">
                            <div class="md-input-wrapper">
                                <label><b>@Model.Translate(2337, "Date Checkin") </b></label>
                                <input ng-click="RefreshValidate()" autocomplete="off" id="FromDate_Step1" type="text" data-uk-datepicker="{format:'DD-MM-YYYY'}" ng-model="FromDate" class="md-input" />
                                <span class="md-input-bar "></span>
                                <span id="err_fromDate" class="error">@Model.Translate(89, "Value is invalid")!</span>
                            </div>
                            <span class="uk-input-group-addon"><i class="uk-input-group-icon uk-icon-calendar"></i></span>
                        </div>
                    </div>
                    <div class="uk-width-large-1-2 uk-width-medium-1-2 uk-width-1-3">
                        <div class="uk-input-group">
                            <div class="md-input-wrapper">
                                <label><b>@Model.Translate(83, "Hour")</b></label>
                                <input ng-click="RefreshValidate()" id="HourCheckin_Step1" type="text" class="md-input format_hour" value="14:00" data-role="maskedtextbox" style="height: 30px;padding-left: 0;">
                                <span id="err_hourFrom" class="error">@Model.Translate(89, "Value is invalid")!</span>
                            </div>
                            <span class="uk-input-group-addon">
                                <i class="uk-input-group-icon uk-icon-clock-o"></i>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="uk-width-medium-1-2 uk-margin-bottom">
                <div class="uk-grid {{data.TypeReservation == 1? 'hide-item':'show-item'}}">
                    <div class="uk-width-large-1-2 uk-width-medium-1-2 uk-width-2-3">
                        <div class="uk-input-group">
                            <div class="md-input-wrapper">
                                <label><b>@Model.Translate(2338, "Date Checkout") </b></label>
                                <input ng-click="RefreshValidate()" id="ToDate_Step1" type="text" data-uk-datepicker="{format:'DD-MM-YYYY'}" ng-model="ToDate" class="md-input" />
                                <span class="md-input-bar "></span>
                                <span id="err_toDate" class="error">@Model.Translate(89, "Value is invalid")!</span>
                            </div>
                            <span class="uk-input-group-addon">
                                <i class="uk-input-group-icon uk-icon-calendar"></i>
                            </span>
                        </div>
                    </div>
                    <div class="uk-width-large-1-2 uk-width-medium-1-2 uk-width-1-3">
                        <div class="uk-input-group">
                            <div class="md-input-wrapper">
                                <label><b>@Model.Translate(83, "Hour")</b></label>
                                <input ng-click="RefreshValidate()" id="HourCheckout_Step1" type="text" class="md-input format_hour" value="12:00" data-role="maskedtextbox" style="height: 30px;padding-left: 0;">
                                <span id="err_hourTo" class="error">@Model.Translate(89, "Value is invalid")!</span>
                            </div>
                            <span class="uk-input-group-addon">
                                <i class="uk-input-group-icon uk-icon-clock-o"></i>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="uk-width-medium-1 uk-text-right">
                <button class="md-btn md-btn-new  md-btn-wave-light" ng-click="SearchAvailability()">
                    <i class="uk-icon-search"></i>
                    @Model.Translate(93, "Search")
                </button>
            </div>
        </div>
    </div>

    <div class="uk-width-1">
        <div class="uk-grid box-select-room" style="margin-left: -10px;">
            <div class="uk-width-large-1 uk-margin-bottom" style="padding-left: 10px;">
                <div class="md-input-wrapper" style="padding-top: 0;">
                    <h4 class="title-box-accomodation"><b>@Model.Translate(77, "Availability") </b></h4>
                    <div class="uk-overflow-container" ng-cloak>
                        <div ng-if="roomtypeAvailability.length == 0" class="uk-text-center box-not-available">
                            <p style="font-size: 16px;padding-top:20px">
                                @Model.Translate(94, "Check-In and Check-Out dates to search for availability")
                            </p>
                        </div>
                        <table class="uk-table uk-table-bordered {{roomtypeAvailability.length == 0? 'hide-item':''}}" style="border: 1px solid #f0f0f0;border-top:none">
                            <thead>
                                <tr>
                                    <th>@Model.Translate(95, "Accom")</th>
                                    <th class="uk-text-center" style="width: 50px;">@Model.Translate(96, "Available")</th>
                                    <th class="uk-text-center" style="width: 60px;">@Model.Translate(86, "Adult")</th>
                                    <th class="uk-text-center" style="width: 60px;">@Model.Translate(87, "Children")</th>
                                    <th class="uk-text-center" style="width: 80px">@Model.Translate(98, "Extrabed")</th>
                                    <th class="uk-text-center" style="width: 100px;">@Model.Translate(99, "Price") ₫</th>
                                    <th class="uk-text-center" style="width: 60px;">@Model.Translate(100, "Quantity")</th>
                                    <th style="width: 100px;"></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="item in roomtypeAvailability" class="{{item.NumberRoomAvailable == 0? 'disable-item':''}}">
                                    <td>{{item.RoomTypeName}}</td>
                                    <td class="uk-text-center">
                                        <b>{{item.NumberRoomAvailable}}</b>
                                    </td>
                                    <td class="uk-text-center">
                                        <select class="md-input" ng-model="item.AdultChoose" convert-to-number>
                                            <option value="{{adult}}" ng-repeat="adult in GetArrayNumber(0,item.Adult) track by $index">
                                                {{adult}}
                                            </option>
                                        </select>
                                    </td>
                                    <td class="uk-text-center" style="width: 60px;">
                                        <select class="md-input" ng-model="item.ChildrenChoose" convert-to-number>
                                            <option value="{{child}}" ng-repeat="child in GetArrayNumber(0,item.Children) track by $index">
                                                {{child}}
                                            </option>
                                        </select>
                                    </td>
                                    <td class="uk-text-center" style="width: 80px;">
                                        <span>
                                            <b>{{calculatorExtrabed(item.RoomTypeExtrabeds)}}</b>
                                        </span>
                                        <span><a ng-click="showScheduleExtrabed(item)" class="edit">@Model.Translate(101, "Edit")</a></span>
                                    </td>
                                    <td class="uk-text-right" style="width: 100px">
                                        <div ng-if="item.TypeBooking == 1" class="uk-text-right">
                                            <span attrCal="{{calculatorPrice(item)}}">
                                                <b>{{item.Total | currency:'':'0'}}</b>
                                            </span>
                                            <span>
                                                <i class="uk-icon-info-circle" title="@Model.Translate(102, "Amount for the first hour")"></i>
                                            </span>
                                        </div>
                                        <span ng-if="item.TypeBooking == 0">
                                            <span attrCal="{{calculatorPrice(item)}}">
                                                <b>{{item.Total | currency:'':'0'}}</b>
                                            </span>
                                            <span style="padding-left: 2px;"> <a ng-click="showSchedulePrice(item)" class="edit">@Model.Translate(101, "Edit")</a></span>
                                        </span>
                                    </td>
                                    <td class="uk-text-center">
                                        <select class="md-input" style="width: 60px;" ng-model="item.NumberRoomChoose" convert-to-number>
                                            <option value="{{quantity}}" ng-repeat="quantity in GetArrayNumber(1,item.NumberRoomAvailable) track by $index">
                                                {{quantity}}
                                            </option>
                                        </select>
                                    </td>
                                    <td class="uk-text-center" style="width: 100px;">
                                        <button class="md-btn md-btn-new md-btn-wave-light" ng-click="addBooking(item)">@Model.Translate(103, "Add")</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="uk-width-large-1 uk-margin-bottom" style="padding-left: 10px;">
                <div class="md-input-wrapper" style="background:#F8F8F8;padding-top: 0;">
                    <h4 class="title-box-accomodation"><b>@Model.Translate(104, "Accommodation") </b></h4>
                    <div class="uk-overflow-container box-table-left" ng-cloak>
                        <div ng-if="bookingChoose.length == 0" class="uk-text-center box-not-available" style="padding: 0 20px;">
                            <p style="font-size: 14px;padding-top:20px">
                                @Model.Translate(105, "Add accommodations to start your reservation")
                            </p>
                        </div>
                        <table class="uk-table uk-table-bordered">
                            <tbody ng-cloak>
                                <tr ng-repeat="item in bookingChoose track by $index">
                                    <td style="border-bottom: 1px dotted #b9afaf;">
                                        <p style="margin-bottom: 2px;">
                                            <b style="text-transform: uppercase;">
                                                {{item.RoomTypeName}} <span style="font-size: 18px;">-</span>
                                                <span attrCal="{{calculatorPrice(item)}}">{{item.Total | currency:'':'0'}} ₫</span>
                                            </b>
                                        </p>
                                        <p>
                                            <b>
                                                @Model.Translate(153, "Type"):
                                                <span ng-if="item.TypeBooking == 0">@Model.Translate(82, "Day")</span>
                                                <span ng-if="item.TypeBooking == 1">@Model.Translate(83, "Hour")</span>
                                            </b>
                                        </p>
                                    </td>
                                    <td>
                                        <p>
                                            {{item.ArrivalDate | date:'dd/MM/yyyy HH:mm'}} -
                                            <span ng-if="item.TypeBooking == 1">
                                                ___
                                            </span>
                                            <span ng-if="item.TypeBooking == 0">
                                                {{item.DepartureDate | date:'dd/MM/yyyy  HH:mm'}}
                                            </span>
                                        </p>
                                    </td>
                                    <td>
                                        <p style="margin: 5px 0;">
                                            {{calculatorExtrabed(item.RoomTypeExtrabeds)}} @Model.Translate(98, "Extrabed"),
                                            <span ng-if="item.TypeBooking == 1">___</span>
                                            <span ng-if="item.TypeBooking == 0">{{item.SpaceDate}}</span> @Model.Translate(106, "nights")
                                        </p>
                                    </td>
                                    <td>
                                        <p>
                                            <select ng-model="item.AdultChoose" convert-to-number class="md-input md-input-sm-default" style="background: white;">
                                                <option value="{{adult}}" ng-repeat="adult in GetArrayNumber(1,item.Adult) track by $index">
                                                    {{adult}}
                                                </option>
                                            </select>
                                            @Model.Translate(86, "Adult"),
                                            <select class="md-input md-input-sm-default" ng-model="item.ChildrenChoose" convert-to-number style="background: white;">
                                                <option value="{{child}}" ng-repeat="child in GetArrayNumber(0,item.Children) track by $index">
                                                    {{child}}
                                                </option>
                                            </select>
                                            @Model.Translate(87, "Children"),
                                        </p>
                                    </td>
                                    <td>
                                        <i class="uk-icon-close icon-close-accom" title="Remove" ng-click="removeBooking($index)"></i>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>
<div class="uk-width-1 div-box-footer">
    <div class="uk-grid">
        <div class="uk-width-1" style="padding: 10px 0;">
            <div class="box-footer">
                <p style="margin: 4px 0;"><b>@Model.Translate(107, "Total Amount")</b></p>
                <p style="margin: 4px 0;"><b>{{(FeePrice + ExtrabedPrice + ServicePrice + SubTotalPrice) | currency:'':'0'}} ₫</b></p>
            </div>
            <div class="box-footer">
                <p style="margin: 4px 0;"><b>@Model.Translate(108, "Fees")</b></p>
                <p style="margin: 4px 0;" attrCal="{{calFee_footer()}}"><b>{{FeePrice | currency:'':'0'}} ₫</b></p>
            </div>
            <div class="box-footer">
                <p style="margin: 4px 0;"><b>@Model.Translate(109, "Services")</b></p>
                <p style="margin: 4px 0;" attrCal="{{calService_footer()}}"><b>{{ServicePrice | currency:'':'0'}} ₫</b></p>
            </div>
            <div class="box-footer">
                <p style="margin: 4px 0;"><b>@Model.Translate(98, "Extrabed")</b></p>
                <p style="margin: 4px 0;" attrCal="{{calExtrabed_footer()}}"><b>{{ExtrabedPrice | currency:'':'0'}} ₫</b></p>
            </div>
            <div class="box-footer">
                <p style="margin: 4px 0;"><b>@Model.Translate(111, "Room Charges")</b></p>
                <p style="margin: 4px 0;" attrCal="{{calSubTotal_footer()}}"><b>{{SubTotalPrice | currency:'':'0'}} ₫</b></p>
            </div>
        </div>
        <div class="uk-width-1">
            <div class="uk-text-right" style="padding: 10px 20px 20px 20px;background: #373737;">
                <button class="md-btn md-btn-new md-btn-wave-light" ng-click="StepGuest()">@Model.Translate(110, "Next")</button>
            </div>
        </div>
    </div>
</div>
<div id="ModalSchedulePrice" class="uk-modal">
    <div class="uk-modal-dialog">
        <button type="button" class="uk-modal-close uk-close"></button>
        <h2 class="heading_a">
            @Model.Translate(112, "Price schedule") - {{schedulePrice.RoomTypeName}}
        </h2>
        <div style="padding-top: 2px;">
            <div class="uk-grid">
                <div class="uk-width-1">
                    <div class="uk-overflow-container box-schedule-price">
                        <table class="uk-table uk-table-bordered">
                            <thead>
                                <tr>
                                    <th ng-repeat="item in schedulePrice.RateAvailabilitys">
                                        <p>{{item.Date | date:'EEE'}}</p>
                                        <p>{{item.Date | date:'dd/MM'}}</p>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td ng-repeat="item in schedulePrice.RateAvailabilitys">
                                        <input ng-model="item.Price" type="text" class="md-input uk-text-center" />
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="uk-grid">
                <div class="uk-width-1 uk-text-right">
                    <button class="md-btn md-btn-new uk-modal-close uk-close md-btn-wave-light">@Model.Translate(113, "Confirm")</button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="ModalScheduleExtrabed" class="uk-modal">
    <div class="uk-modal-dialog">
        <button type="button" class="uk-modal-close uk-close"></button>
        <h2 class="heading_a">@Model.Translate(114, "Choose Extrabed") - {{scheduleExtrabed.RoomTypeName}}</h2>
        <div style="padding-top: 2px;">
            <div class="uk-grid uk-margin-bottom">
                <div class="uk-width-1">
                    <div class="uk-overflow-container box-schedule-price">
                        <table class="uk-table uk-table-bordered">
                            <thead>
                                <tr>
                                    <th>@Model.Translate(115, "Type Extrabed")</th>
                                    <th>@Model.Translate(99, "Price")</th>
                                    <th>@Model.Translate(116, "Number")</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="item in scheduleExtrabed.RoomTypeExtrabeds">
                                    <td>
                                        <b>{{item.ExtrabedName}}</b>
                                    </td>
                                    <td>
                                        <input type="text" ng-model="item.Price" class="md-input uk-text-center" />
                                    </td>
                                    <td>
                                        <select ng-model="item.Number" class="md-input" convert-to-number>
                                            <option value="0">0</option>
                                            <option value="1">1</option>
                                            <option value="2">2</option>
                                            <option value="3">3</option>
                                            <option value="4">4</option>
                                        </select>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="uk-grid">
                <div class="uk-width-1 uk-text-right">
                    <button class="md-btn md-btn-new uk-modal-close uk-close md-btn-wave-light">@Model.Translate(113, "Confirm")</button>
                </div>
            </div>
        </div>
    </div>
</div>
