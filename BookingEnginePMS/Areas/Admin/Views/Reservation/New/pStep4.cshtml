@using BookingEnginePMS.Models;
@model Transition
<div class="uk-grid" style="margin-top: -20px;">
    <div class="uk-width-large-3-5 uk-width-medium-1-2">
        <div class="uk-grid uk-margin-bottom">
            <div class="uk-width-large-1-2">
                <div class="uk-grid">
                    <div class="uk-width-1-1 uk-margin-bottom">
                        <h4>
                            <b><u>@Model.Translate(121, "Guest Information")</u></b>
                        </h4>
                    </div>
                    <div class="uk-width-1-1 uk-margin-small-bottom">
                        <div class="uk-grid uk-margin-small-bottom">
                            <div class="uk-width-1-3">
                                <span>@Model.Translate(122, "Guest's Name"):</span>
                            </div>
                            <div class="uk-width-2-3">
                                <b>{{guest.SurName}} {{guest.FirstName}}</b>
                            </div>
                        </div>
                        <div class="uk-grid uk-margin-small-bottom">
                            <div class="uk-width-1-3">
                                <span>@Model.Translate(123, "Phone"):</span>
                            </div>
                            <div class="uk-width-2-3">
                                <b>{{guest.Phone}}</b>
                            </div>
                        </div>
                        <div class="uk-grid">
                            <div class="uk-width-1-3">
                                <span>@Model.Translate(124, "Email"):</span>
                            </div>
                            <div class="uk-width-2-3">
                                <b>{{guest.Email}}</b>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="uk-width-large-1-2">
                <div class="uk-grid">
                    <div class="uk-width-1-1 uk-margin-bottom">
                        <h4>
                            <b><u>@Model.Translate(125, "Flight Information")</u></b>
                        </h4>
                    </div>
                    <div class="uk-width-1-1">
                        <div class="uk-grid uk-margin-small-bottom">
                            <div class="uk-width-1-3">
                                <span>@Model.Translate(126, "Arrival Flight"):</span>
                            </div>
                            <div class="uk-width-2-3">
                                <b>{{data.ArrivalFlightDate}}, {{data.ArrivalFlightTime}}</b>
                            </div>
                        </div>
                        <div class="uk-grid">
                            <div class="uk-width-1-3">
                                <span>@Model.Translate(127, "Departure Flight"):</span>
                            </div>
                            <div class="uk-width-2-3">
                                <b>{{data.DepartureFlightDate}}, {{data.DepartureFlightTime}}</b>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="uk-width-1-1">
                <hr />
            </div>
        </div>
        <div class="uk-grid uk-margin-bottom">
            <div class="uk-width-1-1 uk-margin-bottom">
                <h4>
                    <b><u>@Model.Translate(128, "Reservation Information")</u></b>
                </h4>
            </div>
            <div class="uk-width-1-1">
                <div class="uk-grid">
                    <div class="uk-width-large-1-2">
                        <div class="uk-grid uk-margin-small-bottom">
                            <div class="uk-width-1-3">
                                <span>@Model.Translate(91, "Check in"):</span>
                            </div>
                            <div class="uk-width-2-3">
                                <b>{{data.CheckIn | date: 'dd/MM/yyyy HH:mm'}}</b>
                            </div>
                        </div>
                        <div class="uk-grid uk-margin-small-bottom">
                            <div class="uk-width-1-3">
                                <span>@Model.Translate(92, "Check out"):</span>
                            </div>
                            <div class="uk-width-2-3">
                                <b>{{data.CheckOut | date: 'dd/MM/yyyy HH:mm'}}</b>
                            </div>
                        </div>
                        <div class="uk-grid uk-margin-small-bottom">
                            <div class="uk-width-1-3">
                                <span>@Model.Translate(129, "Night"):</span>
                            </div>
                            <div class="uk-width-2-3">
                                <b>@Session["NumberDateInHouse"]</b>
                            </div>
                        </div>
                    </div>
                    <div class="uk-width-large-1-2">
                        <div class="uk-grid uk-margin-small-bottom">
                            <div class="uk-width-1-3">
                                <span>@Model.Translate(88, "Voucher"):</span>
                            </div>
                            <div class="uk-width-2-3">
                                <b>{{data.Voucher}}</b>
                            </div>
                        </div>
                        <div class="uk-grid uk-margin-small-bottom">
                            <div class="uk-width-1-3">
                                <span>@Model.Translate(86, "Adult"):</span>
                            </div>
                            <div class="uk-width-2-3">
                                <b>{{data.Adult}}</b>
                            </div>
                        </div>
                        <div class="uk-grid">
                            <div class="uk-width-1-3">
                                <span>@Model.Translate(87, "Children"):</span>
                            </div>
                            <div class="uk-width-2-3">
                                <b>{{data.Children}}</b>
                            </div>
                        </div>
                    </div>
                    <div class="uk-width-1">
                        <div class="uk-grid uk-margin-small-bottom">
                            <div class="uk-width-1">
                                <span>@Model.Translate(131, "Note for booking"):</span>
                            </div>
                            <div class="uk-width-1">
                                <textarea rows="3" class="md-input" ng-model="data.Note" style="border: 1px solid rgb(234, 234, 234);"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="uk-width-large-2-5 uk-width-medium-1-2">
        <div class="uk-grid">
            <div class="uk-width-1-1 uk-margin-small-bottom uk-text-right">
               
            </div>
            <div class="uk-width-1-1 uk-margin-small-bottom">
                <h5 class="title-box-small-accomodation">
                    <b>@Model.Translate(130, "Charges Information")</b>
                    <label style="float: right;margin-right: 10px;">
                        <input ng-change="reCalculatorTaxFee()" type="checkbox" id="IncludeVATAndServiceCharge" ng-model="IncludeVATAndServiceCharge" />
                        <span style="font-size:14px !important">@Model.Translate(2431, "Includes tax and service charges")</span>
                    </label>
                </h5>
            </div>
            <div class="uk-width-1">
                <div style="padding: 0 10px;">
                    <div class="uk-grid uk-margin-small-bottom">
                        <div class="uk-width-medium-2-3 uk-width-1-3">
                            <span>@Model.Translate(111, "Room Charges"):</span>
                        </div>
                        <div class="uk-width-medium-1-3 uk-width-2-3 uk-text-right">
                            <b style="white-space: nowrap;">{{SubTotalPrice | currency:'':'0'}} ₫</b>
                        </div>
                    </div>
                    <div class="uk-grid uk-margin-small-bottom">
                        <div class="uk-width-medium-2-3 uk-width-1-3">
                            <span>@Model.Translate(109, "Services"):</span>
                        </div>
                        <div class="uk-width-medium-1-3 uk-width-2-3 uk-text-right">
                            <b style="white-space: nowrap;">{{ServicePrice | currency:'':'0'}} ₫</b>
                        </div>
                    </div>
                    <div class="uk-grid uk-margin-small-bottom">
                        <div class="uk-width-medium-2-3 uk-width-1-3">
                            <span>@Model.Translate(98, "Extrabed"):</span>
                        </div>
                        <div class="uk-width-medium-1-3 uk-width-2-3 uk-text-right">
                            <b style="white-space: nowrap;">{{ExtrabedPrice | currency:'':'0'}} ₫</b>
                        </div>
                    </div>
                    <div class="uk-grid uk-margin-small-bottom">
                        <div class="uk-width-medium-2-3 uk-width-1-3">
                            <b>@Model.Translate(132, "Discount For Guest") ({{data.Guest.Discount}}%):</b>
                        </div>
                        <div class="uk-width-medium-1-3 uk-width-2-3 uk-text-right">
                            <span style="font-weight: 700;white-space: nowrap;">- {{(ExtrabedPrice + SubTotalPrice + ServicePrice) * data.Guest.Discount/ 100 | currency:'':'0'}} ₫</span>
                        </div>
                        <div class="uk-width-1">
                            <span style="width:100%;border-bottom: 1px dotted #c1bdbd;display:block;margin-top: 10px;"></span>
                        </div>
                    </div>
                    <div class="uk-grid uk-margin-small-bottom">
                        <div class="uk-width-medium-2-3 uk-width-1-3">
                            <b>@Model.Translate(107, "Total Amount"):</b>
                        </div>
                        <div class="uk-width-medium-1-3 uk-width-2-3 uk-text-right">
                            <span style="font-weight: 700;white-space: nowrap;">{{(ExtrabedPrice + SubTotalPrice + ServicePrice) * (100 -data.Guest.Discount) / 100  | currency:'':'0'}} ₫</span>
                        </div>
                    </div>
                    <div class="uk-grid uk-margin-small-bottom">
                        <div class="uk-width-medium-2-3 uk-width-1-3">
                            <span>@Model.Translate(108, "Fees"):</span>
                        </div>
                        <div class="uk-width-medium-1-3 uk-width-2-3 uk-text-right">
                            <b style="white-space: nowrap;font-weight: 700;color: #f52c2c;">+ {{FeePrice | currency:'':'0'}} ₫</b>
                        </div>
                        <div class="uk-width-1">
                            <span style="width:100%;border-bottom: 1px dotted #c1bdbd;display:block;margin-top: 10px;"></span>
                        </div>
                    </div>
                    <div class="uk-grid uk-margin-small-bottom">
                        <div class="uk-width-medium-2-3 uk-width-1-3">
                            <b>@Model.Translate(1271, "Balance Due"):</b>
                        </div>
                        <div class="uk-width-medium-1-3 uk-width-2-3 uk-text-right">
                            <span style="font-weight: 700;white-space: nowrap;" attCal="{{calculatorBalanceDue()}}">{{data.BalanceDue | currency:'':'0'}} ₫</span>
                        </div>
                        <div class="uk-width-1">
                            <span style="width:100%;border-bottom: 1px solid #c1bdbd;display:block;margin-top: 10px;"></span>
                        </div>
                    </div>
                    <div class="uk-grid uk-margin-bottom">
                        <div class="uk-width-medium-2-3 uk-width-1-3">
                            <b>@Model.Translate(133, "Deposit") (₫):</b>
                        </div>
                        <div class="uk-width-medium-1-3 uk-width-2-3 uk-text-right">
                            <div class="box-deposit">
                                <input ng-click="RefreshValidate()" type="text" class="md-input" ng-model="data.Amount" /> @*data.DepositPecent*@
                                <span id="err_Deposit" class="error">@Model.Translate(89, "Value is invalid")!</span>
                            </div>
                            @*<p attCal="{{calculatorDepositPecent()}}" style="color:red;white-space: nowrap;">- {{data.Amount}} đ</p>*@
                        </div>
                    </div>
                    <div class="uk-grid uk-margin-small-bottom">
                        <div class="uk-width-medium-1-2 uk-width-1-3">
                            <b>@Model.Translate(134, "Expected balance due on arrival"):</b>
                        </div>
                        <div class="uk-width-medium-1-2 uk-width-2-3 uk-text-right">
                            <span style="font-weight: 700;font-size: 16px;white-space: nowrap;" attCal="{{calculatorExpectedBalance()}}">{{ExpectedBalance | currency:'':'0'}} ₫</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="uk-grid">
            <div class="uk-width-1">
                <div style="padding: 0 10px;">
                    <div class="uk-grid">
                        <div class="uk-width-1-1 uk-margin-bottom">
                            <hr />
                            <h4>
                                <b><u>@Model.Translate(135, "Payment Information")</u></b>
                            </h4>
                        </div>
                        <div class="uk-width-1-1 uk-margin-medium-bottom">
                            <div class="md-input-wrapper">
                                <label><b>@Model.Translate(136, "Payment Type")</b></label>
                                <select ng-model="data.PaymentType" class="md-input" style="margin-top:8px" convert-to-number>
                                    <option value="1">@Model.Translate(137, "Do not collect payment")</option>
                                    <option value="2">@Model.Translate(138, "Cash")</option>
                                    <option value="4">@Model.Translate(140, "Debit Card")</option>
                                    <option value="6">@Model.Translate(142, "Voucher")</option>
                                    <option value="10">@Model.Translate(146, "Prepago")</option>
                                    <option value="11">@Model.Translate(502, "Cash On Arrival")</option>
                                    <option value="12">@Model.Translate(148, "Third-party payment")</option>
                                    <option value="13">@Model.Translate(2346, "Payment by VTC Pay")</option>
                                    <option value="14">@Model.Translate(2347, "Payment by One Pay")</option>
                                    <option value="15">@Model.Translate(2348, "Payment later")</option>
                                    <option value="16">@Model.Translate(2349, "Transfer")</option>
                                    <option value="17">@Model.Translate(2350, "QR Code")</option>
                                    <option value="18">Paypal</option>
                                </select>
                                <span class="md-input-bar "></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="uk-width-1">
        <div class="uk-grid uk-margin-bottom">
            <div class="uk-width-1">
                <h4 class="title-box-accomodation"><b>@Model.Translate(151, "Accommodation Chosen") </b></h4>
                <div class="uk-overflow-container box-select-room">
                    <table class="uk-table uk-table-bordered" style="border: 1px solid #f0f0f0;border-top: none;">
                        <thead>
                            <tr>
                                <th style="min-width:100px">@Model.Translate(95, "Accom")</th>
                                <th style="width:60px">@Model.Translate(153, "Type")</th>
                                <th class="uk-text-center" style="width:100px">@Model.Translate(152, "Room")</th>
                                <th class="uk-text-center" style="width:120px">@Model.Translate(154, "Check In")</th>
                                <th class="uk-text-center" style="width:120px">@Model.Translate(155, "Check Out")</th>
                                <th class="uk-text-center" style="width:50px">@Model.Translate(129, "Night")</th>
                                <th class="uk-text-center" style="width:200px">@Model.Translate(122, "Guest' Name")</th>
                                <th class="uk-text-center" style="width:80px">@Model.Translate(86, "Adult")</th>
                                <th class="uk-text-center" style="width:80px">@Model.Translate(87, "Children")</th>
                                <th class="uk-text-center" style="width:120px">@Model.Translate(156, "Total")</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="item in bookingChoose track by $index">
                                <td>{{item.RoomTypeName}}</td>
                                <td>
                                    <span ng-if="item.TypeBooking == 1">@Model.Translate(83, "Hour")</span>
                                    <span ng-if="item.TypeBooking == 0">@Model.Translate(82, "Day")</span>
                                </td>
                                <td>
                                    <select ng-change="setRoomForBooking(item.RoomTypeId)" ng-model="item.RoomId" class="md-input" convert-to-number>
                                        <option value="-1">N/A</option>
                                        <option value="{{room.RoomId}}" ng-repeat="room in item.Rooms">
                                            {{room.RoomCode}}
                                        </option>
                                    </select>
                                </td>
                                <td class="uk-text-center">{{item.ArrivalDate | date:'dd/MM/yyyy HH:mm'}}</td>
                                <td class="uk-text-center">
                                    <span ng-if="item.TypeBooking == 1">___</span>
                                    <span ng-if="item.TypeBooking == 0">
                                        {{item.DepartureDate | date:'dd/MM/yyyy HH:mm'}}
                                    </span>
                                </td>
                                <td class="uk-text-center">
                                    <span ng-if="item.TypeBooking == 1">___</span>
                                    <span ng-if="item.TypeBooking == 0">{{item.SpaceDate}}</span>
                                </td>
                                <td class="box-guest-booking">
                                    <span>
                                        {{item.Guest.SurName}} {{item.Guest.FirstName}}
                                    </span>
                                </td>
                                <td class="uk-text-center">{{item.AdultChoose}}</td>
                                <td class="uk-text-center">{{item.ChildrenChoose}}</td>
                                <td class="uk-text-right">
                                    <b>{{item.Total | currency: '':''}} ₫ </b>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="uk-grid">
            <div class="uk-width-1 uk-margin-bottom">
                <h5 class="title-box-small-accomodation" style="margin-bottom: 0;"><b>@Model.Translate(157, "Service chosen") </b></h5>
                <div class="uk-overflow-container box-table-left" ng-cloak>
                    <table class="uk-table uk-table-bordered" style="border: 1px solid #f0f0f0;border-top:none">
                        <thead>
                            <tr style="background: linear-gradient(rgb(246, 247, 248), rgb(215, 215, 215));">
                                <th>@Model.Translate(119, "Name")</th>
                                <th class="uk-text-center">@Model.Translate(2449, "Date Use")</th>
                                <th class="uk-text-center" style="width: 60px;">@Model.Translate(99, "Price") (₫)</th>
                                <th class="uk-text-center" style="width: 50px;">@Model.Translate(100, "Quantity")</th>
                                <th class="uk-text-center" style="width: 140px;">@Model.Translate(104, "Accommodation")</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="item in serviceChoose track by $index">
                                <td>{{item.ServiceName}}</td>
                                <td class="uk-text-center" style="width: 150px;">
                                    <span>{{item.DateUser}}</span>
                                </td>
                                <td class="uk-text-right">
                                    <b>{{item.Price | currency:"":""}}</b>
                                </td>
                                <td class="uk-text-center">
                                    <span>
                                        {{item.Number}}
                                    </span>
                                </td>
                                <td>
                                    <select ng-model="item.RoomTypeIdIndex" disabled class="md-input">
                                        <option value="-1">@Model.Translate(158, "All")</option>
                                        <option value="{{sv.RoomTypeId}}-{{sv.Index}}" ng-repeat="sv in roomtypeForService">{{sv.RoomTypeName}} (#{{sv.Index}})</option>
                                    </select>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div class="uk-width-1">
        <div class="uk-grid" style="margin-left:0;background: #f0f0f0;">
            <div class="uk-width-1">
                <div class="uk-grid">
                    <div class="uk-width-1-2" style="padding: 10px 20px 20px 20px;background: #373737;">
                        <button class="md-btn md-btn-new md-btn-wave-light" ng-click="StepGuest()">@Model.Translate(120, "Back")</button>
                    </div>
                    <div class="uk-width-1-2 uk-text-right" style="padding: 10px 20px 20px 20px;background: #373737;">
                        <button class="md-btn md-btn-new md-btn-wave-light" ng-click="ConfirmReservation()">@Model.Translate(159, "Finish")</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
